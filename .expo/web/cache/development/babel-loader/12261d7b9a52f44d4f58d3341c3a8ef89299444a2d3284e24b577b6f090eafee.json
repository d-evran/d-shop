{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { collection, getDocs, orderBy, query } from \"firebase/firestore\";\nimport { db } from \"../../../services/firebase\";\nvar initialState = {\n  products: [],\n  copyProducts: [],\n  sortOrder: \"asc\",\n  search: \"\"\n};\nexport var getProductssAsync = createAsyncThunk(\"urunler/getProductssAsync\", _asyncToGenerator(function* () {\n  var imagesRef = collection(db, \"products\");\n  var q = query(imagesRef, orderBy(\"id\"));\n  return getDocs(q).then(function (querySnapshot) {\n    var data = [];\n    querySnapshot.forEach(function (doc) {\n      data.push({\n        id: doc.id,\n        image: doc.data().imageUrl,\n        productName: doc.data().productName,\n        brandName: doc.data().brandName,\n        category: doc.data().category,\n        price: doc.data().price\n      });\n    });\n    return data;\n  }).catch(function (error) {\n    console.log(error);\n  });\n}));\nvar sortProducts = function sortProducts(products, sortOrder) {\n  return _toConsumableArray(products).sort(function (a, b) {\n    if (sortOrder === \"asc\") {\n      return a.price - b.price;\n    } else {\n      return b.price - a.price;\n    }\n  });\n};\nvar urunlerSlice = createSlice({\n  name: \"urunler\",\n  initialState: initialState,\n  reducers: {\n    handleSortPrice: function handleSortPrice(state) {\n      state.products = sortProducts(state.products, state.sortOrder);\n      state.sortOrder = state.sortOrder === \"asc\" ? \"desc\" : \"asc\";\n    },\n    handleChangeText: function handleChangeText(state, action) {\n      if (action.payload) {\n        var filteredProducts = state.products.filter(function (product) {\n          return product.productName.toLocaleLowerCase().includes(action.payload.toLocaleLowerCase());\n        });\n        state.search = action.payload;\n        state.products = filteredProducts;\n      } else {\n        state.search = action.payload;\n        state.products = state.copyProducts;\n      }\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(getProductssAsync.fulfilled, function (state, action) {\n      state.products = state.products.concat(action.payload);\n      state.copyProducts = state.copyProducts.concat(action.payload);\n    });\n  }\n});\nvar _urunlerSlice$actions = urunlerSlice.actions,\n  handleSortPrice = _urunlerSlice$actions.handleSortPrice,\n  handleChangeText = _urunlerSlice$actions.handleChangeText;\nexport { handleSortPrice, handleChangeText };\nexport var selectProducts = function selectProducts(state) {\n  return state.urunler.products;\n};\nexport var selectCopyProducts = function selectCopyProducts(state) {\n  return state.urunler.copyProducts;\n};\nexport var selectSearch = function selectSearch(state) {\n  return state.urunler.search;\n};\nexport default urunlerSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","collection","getDocs","orderBy","query","db","initialState","products","copyProducts","sortOrder","search","getProductssAsync","_asyncToGenerator","imagesRef","q","then","querySnapshot","data","forEach","doc","push","id","image","imageUrl","productName","brandName","category","price","catch","error","console","log","sortProducts","_toConsumableArray","sort","a","b","urunlerSlice","name","reducers","handleSortPrice","state","handleChangeText","action","payload","filteredProducts","filter","product","toLocaleLowerCase","includes","extraReducers","builder","addCase","fulfilled","concat","_urunlerSlice$actions","actions","selectProducts","urunler","selectCopyProducts","selectSearch","reducer"],"sources":["C:/Users/Didem/source/repos/03-MOBIL/Görevler/Görev 18/18-didemevran/src/screens/Anasayfa/Search/urunlerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { collection, getDocs, orderBy, query } from \"firebase/firestore\";\r\nimport { db } from \"../../../services/firebase\";\r\n\r\nconst initialState = {\r\n  products: [],\r\n  copyProducts: [],\r\n  sortOrder: \"asc\",\r\n  search: \"\",\r\n};\r\n\r\nexport const getProductssAsync = createAsyncThunk(\r\n  \"urunler/getProductssAsync\",\r\n  async () => {\r\n    const imagesRef = collection(db, \"products\");\r\n    const q = query(imagesRef, orderBy(\"id\"));\r\n    return getDocs(q)\r\n      .then((querySnapshot) => {\r\n        const data = [];\r\n        querySnapshot.forEach((doc) => {\r\n          // console.log(doc.id, doc.data());\r\n          data.push({\r\n            id: doc.id,\r\n            image: doc.data().imageUrl,\r\n            productName: doc.data().productName,\r\n            brandName: doc.data().brandName,\r\n            category: doc.data().category,\r\n            price: doc.data().price,\r\n          });\r\n        });\r\n        return data;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n);\r\n\r\nconst sortProducts = (products, sortOrder) => {\r\n  return [...products].sort((a, b) => {\r\n    if (sortOrder === \"asc\") {\r\n      return a.price - b.price;\r\n    } else {\r\n      return b.price - a.price;\r\n    }\r\n  });\r\n};\r\n\r\nconst urunlerSlice = createSlice({\r\n  name: \"urunler\",\r\n  initialState,\r\n  reducers: {\r\n    handleSortPrice: (state) => {\r\n      state.products = sortProducts(state.products, state.sortOrder);\r\n      state.sortOrder = state.sortOrder === \"asc\" ? \"desc\" : \"asc\";\r\n    },\r\n    handleChangeText: (state, action) => {\r\n      if (action.payload) {\r\n        const filteredProducts = state.products.filter((product) => {\r\n          return product.productName\r\n            .toLocaleLowerCase()\r\n            .includes(action.payload.toLocaleLowerCase());\r\n        });\r\n        state.search = action.payload;\r\n        state.products = filteredProducts;\r\n      } else {\r\n        state.search = action.payload;\r\n        state.products = state.copyProducts;\r\n      }\r\n    },\r\n  },\r\n  extraReducers(builder) {\r\n    builder.addCase(getProductssAsync.fulfilled, (state, action) => {\r\n      state.products = state.products.concat(action.payload);\r\n      state.copyProducts = state.copyProducts.concat(action.payload);\r\n    });\r\n  },\r\n});\r\n\r\nexport const { handleSortPrice, handleChangeText } = urunlerSlice.actions;\r\n\r\nexport const selectProducts = (state) => state.urunler.products;\r\nexport const selectCopyProducts = (state) => state.urunler.copyProducts;\r\nexport const selectSearch = (state) => state.urunler.search;\r\n\r\nexport default urunlerSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}